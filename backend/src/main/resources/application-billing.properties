# ========================================
# Billing Hub Configuration
# ========================================

# Billing Account Settings
billing.account.default-currency=USD
billing.account.auto-payment-enabled=true
billing.account.credit-limit-warning-threshold=0.8

# Subscription Settings
billing.subscription.trial-days=14
billing.subscription.default-billing-cycle=MONTHLY
billing.subscription.auto-renew=true
billing.subscription.warning-days-before-expiry=7

# Entitlement Settings
billing.entitlement.warning-threshold-percentage=80
billing.entitlement.reset-check-cron=0 0 0 * * ?  # Daily at midnight
billing.entitlement.usage-tracking-enabled=true

# Overage Settings
billing.overage.enabled=true
billing.overage.default-rate=0.001  # Per unit overage rate
billing.overage.max-overage-multiplier=2.0  # Maximum overage as multiple of limit

# Notification Settings
billing.notification.usage-warning-enabled=true
billing.notification.limit-reached-enabled=true
billing.notification.subscription-expiry-enabled=true
billing.notification.payment-failed-enabled=true

# Currency Settings
billing.currency.supported=USD,VND,EUR
billing.currency.default=USD

# Plan Configuration
billing.plans.free.max-users=1
billing.plans.free.max-bots=1
billing.plans.free.max-messages-per-month=100
billing.plans.free.max-storage-mb=100

billing.plans.starter.max-users=5
billing.plans.starter.max-bots=3
billing.plans.starter.max-messages-per-month=1000
billing.plans.starter.max-storage-mb=1000

billing.plans.professional.max-users=20
billing.plans.professional.max-bots=10
billing.plans.professional.max-messages-per-month=10000
billing.plans.professional.max-storage-mb=10000

billing.plans.enterprise.max-users=100
billing.plans.enterprise.max-bots=50
billing.plans.enterprise.max-messages-per-month=100000
billing.plans.enterprise.max-storage-mb=100000

# Rate Limiting
billing.rate-limit.api-calls-per-minute=60
billing.rate-limit.api-calls-per-hour=1000
billing.rate-limit.file-uploads-per-hour=100

# Security Settings
billing.security.require-ssl=true
billing.security.encrypt-payment-data=true
billing.security.audit-log-enabled=true

# Integration Settings
billing.integration.payment-provider=stripe
billing.integration.webhook-secret=${BILLING_WEBHOOK_SECRET:default-secret}
billing.integration.stripe.publishable-key=${STRIPE_PUBLISHABLE_KEY:}
billing.integration.stripe.secret-key=${STRIPE_SECRET_KEY:}

# Database Settings
spring.datasource.billing.jdbc-url=jdbc:postgresql://localhost:5432/traloitudong_db
spring.datasource.billing.username=traloitudong_user
spring.datasource.billing.password=traloitudong_Admin_2025
spring.datasource.billing.driver-class-name=org.postgresql.Driver

# JPA Settings for Billing
spring.datasource.billing.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.datasource.billing.hibernate.ddl-auto=update
spring.datasource.billing.hibernate.show-sql=false
spring.datasource.billing.hibernate.format-sql=true
spring.datasource.billing.hibernate.use_sql_comments=true

# Connection Pool Settings for Billing
spring.datasource.billing.hikari.minimum-idle=5
spring.datasource.billing.hikari.maximum-pool-size=20
spring.datasource.billing.hikari.idle-timeout=30000
spring.datasource.billing.hikari.pool-name=BillingHikariCP
spring.datasource.billing.hikari.connection-timeout=30000

# gRPC Settings
billing.grpc.server.port=50055
billing.grpc.client.identity.port=50061
billing.grpc.client.tenant.port=50053
billing.grpc.client.user.port=50054

# Logging
logging.level.com.chatbot.core.billing=DEBUG
logging.level.com.chatbot.core.billing.account=DEBUG
logging.level.com.chatbot.core.billing.subscription=DEBUG
logging.level.com.chatbot.core.billing.entitlement=DEBUG
